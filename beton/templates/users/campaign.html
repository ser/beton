
{% extends "layout.html" %}
{% block content %}
    <div class="jumbotron">
    <h1>Hey, {{ current_user.username }} <i class="fa fa-gratipay"
            aria-hidden="true"></i></h1>
    <p>Here are your past, current and future campaigns</p>
    </div>
    <div class="row">
        <div class="col-sm-6">
            <h3>Your campaigns as follow</h3>
            <div id="grid">
                    {% for campaign in all_campaigns %}
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h3 class="panel-title">#{{ campaign['campaignId'] }} {{ campaign['campaignName'] }}</h3>
                            </div>
                            <div class="panel-body">
                                <div><p><b>From:</b> {{ campaign['startDate'] }}</p></div>
                                <div><p><b>To:</b> {{ campaign['endDate'] }}</p></div>
                                <div><p><i class="fa fa-btc" aria-hidden="true"></i>
                                        {{ campaign['amount_btc'] }} ----
                                        Confirmed? <a href="{{ config.BLOCKCHAIN }}{{ campaign['btc_address'] }}">
                                        {{ campaign['ispaid'] }}</a></div>
                                {% for banner in banners %}
                                    {% if campaign['campaignId'] == banner[0] %}
                                        {% if banner[1] %}
                                        <div><img class="img-thumbnail thumbmax" 
                                            src="{{ banner[1][0]['imageURL'] }}"></div>
                                        {% endif %}
                                    {% endif %}
                                {% endfor %}
                            </div>
                        </div>
                    {% endfor %}
            </div>
        </div>
        <div class="col-sm-6">
            <h3>This is an overview of all recent and ongoing campaigns on our websites</h3>
            <div id="calendar"></div>
        </div>
    </div>
{% endblock %}
{% block js %}
<script>
    var events_source = "{{ config.SUBDIR  }}/api/all_campaigns_in_zone/0";
    $('#calendar').calendar(
            {
                events_source: events_source,
                tmpl_path: "{{ config.SUBDIR }}/static/libs/bootstrap-calendar/tmpls/"
            }
    );
    savvior.init('#grid', {
        "screen and (max-width: 15em)": { columns: 1 },
        "screen and (min-width: 15em)": { columns: 2 },
    });
</script>
{% endblock %}
