
{% extends "layout.html" %}
{% block content %}
    <div class="jumbotron">
{% if basket == 0 %}
        <h1>Your basket is empty, {{ current_user.username }}</h1>
        <p><a href="{{ url_for('user.order') }}" class="btn btn-default">Order a new campaign</a></p>
    </div>
{% else %}
        <h1>Your basket, {{ current_user.username }}</h1>
        <div class="row">
            <div class="col-sm-6 col-xs-12">
                <p>Here you can see your shopping basket.</p>
                <p>In total whole basket is: <i class="fa fa-eur fa-fw" aria-hidden="true"></i>{{ total }} / <i class="fa fa-btc fa-fw" aria-hidden="true"></i>{{ cointotal }} ***
                <div>
                    <a href="{{ url_for('user.clear_basket', campaign_id=0) }}" class="btn btn-danger">Empty whole basket</a>
                </div>
            </div>
            <div class="col-sm-6 col-xs-12">
                <p>Pay for all items in the basket using:</p>
                <div>
                    <a href="{{ url_for('user.pay', payment='tbtc') }}"
                        class="btn btn-success btn-xs">Bitcoin testnet standard address</a>
                </div>
                or
                <div>
                    <a href="{{ url_for('user.pay', payment='tbtcs') }}"
                        class="btn btn-success btn-xs">Bitcoin testnet SegWit (Bech32
                        address)</a>
                </div>
            </div>
        </div>
    </div>
    </div>
    <div id="grid">
        {% for order in basket %}
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">Campaign #{{ order[0].campaigno }}</h3>
                </div>
                <div class="panel-body">
                    <div class="thumbnail">
                        <div class="caption">
                            <div>
                                <img class="img-thumbnail thumbmax"
                                src="{{ config.UPLOADED_IMAGES_URL }}{{ order.filename }}">
                                <br/>
                                {{ order.url }}
                                <br/>
                                <b>From:</b> {{ order[0].begins_at }}
                                <br/>
                                <b>To:</b> {{ order[0].stops_at }}
                            </div>
                            <a href="{{ config.OUR_URL }}clear/basket/{{ order[0].campaigno }}" class="btn btn-danger btn-xs">Remove from
                                basket</a>
                        </div>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
    <p class="text-warning"> *** Please notice that estimated price may change when
        you decide to pay for your basket, according to current zone prices and Bitcoin market exchange
        value. You'll get the final price when the payment invoice is generated.</p>
{% endif %}
{% endblock %}
{% block js %}
    <script>
        $(document).ready(function() {
            savvior.init('#grid', {
                "screen and (max-width: 30em)": { columns: 1 },
                "screen and (min-width: 30em) and (max-width: 60em)" : { columns: 2 },
                "screen and (min-width: 60em) and (max-width: 80em)": {
                      columns: 3 },
                "screen and (min-width: 80em)": { columns: 4 },
            });
        });
     </script>
{% endblock %}
